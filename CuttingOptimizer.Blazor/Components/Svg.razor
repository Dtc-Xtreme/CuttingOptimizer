@using CuttingOptimizer.Domain.Models;
@using System.Globalization;

<svg viewBox="0 0 @Plate.WidthWithTrim @Plate.LengthWithTrim" style="width: @Width.ToString("0.00", CultureInfo.InvariantCulture)%">
    @if(Plate.Products != null && Plate.Products.Count != 0)
    {
        @foreach (Product prod in Plate.Products)
        {
            <g>
                <rect width="@prod.Width" height="@prod.Length" x="0" y="0" />
                <text x="20" y="50" font-family="Verdana" font-size="25" fill="blue">@prod.Info</text>
            </g>
        }
    }
</svg>

@code {
    [Parameter]
    public double Scale { get; set; }

    [Parameter]
    public Plate Plate { get; set; }

    private double Width { get; set; }

    protected override void OnInitialized()
    {
        if(Plate.WidthWithTrim / 100 == Scale)
        {
            Width = 100;
        }
        else
        {
            Width = Plate.WidthWithTrim / Scale;
        }
    }
}
