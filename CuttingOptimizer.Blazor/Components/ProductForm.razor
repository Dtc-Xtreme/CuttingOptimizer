@using CuttingOptimizer.Domain.Models;
<EditForm Model="@Products" class="m-2">
    <DataAnnotationsValidator />
    <div class="form-row title-bar">
        <div class="form-group">
            <h3>Item</h3>
        </div>              
        <div class="form-group ml-2">
            <button type="button" class="btn btn-primary" @onclick="AddProduct">+</button>
        </div>
    </div>
    @foreach(Product product in Products)
    {
        <div class="form-row">
            <div class="form-group w-100 col-lg-1 col-xs-12">
                @if (product == Products[0])
                {
                    <label>Aantal</label>
                }
                <InputNumber class="form-control" id="productQuantity" @bind-Value="product.Quantity" placeholder="#" min="1" />
            </div>
            <div class="form-group w-100 col-lg-1 col-xs-12">
                @if (product == Products[0])
                {
                    <label>Label</label>
                }
                <InputText class="form-control" id="productID" @bind-Value="product.ID" placeholder="ID" />
            </div>
            <div class="form-group w-100 col-lg-1 col-xs-12">
                @if (product == Products[0])
                {
                    <label>Lengte</label>
                }
                <InputNumber class="form-control" id="productLength" @bind-Value="product.Length" placeholder="Lengte" />
            </div>
            <div class="form-group w-100 col-lg-1 col-xs-12">
                @if (product == Products[0])
                {
                    <label>Breedte</label>
                }
                <InputNumber class="form-control" id="productWidth" @bind-Value="product.Width" placeholder="Breedte" />
            </div>
            <div class="form-group w-100 col-lg-1 col-xs-12">
                @if (product == Products[0])
                {
                    <label>Hoogte</label>
                }
                <InputNumber class="form-control" id="productHeight" @bind-Value="product.Height" placeholder="Hoogte" />
            </div>
            <div class="form-group w-100 col-lg-1 col-xs-12 text-center">
                @if (product == Products[0])
                {
                    <label>Verwijder</label>
                }
                <button type="button" class="form-control btn btn-danger" @onclick="() => RemoveProduct(product)">X</button>
            </div>
        </div>
    }
    <ValidationSummary />
</EditForm>


@code {
    [Parameter]
    public List<Product> Products { get; set; } = new List<Product>();

    protected override void OnInitialized()
    {
        if(Products.Count() == 0) Products.Add(new Product());
    }

    private void AddProduct()
    {
        Products.Add(new Product());
    }

    private void RemoveProduct(Product product)
    {
        if(Products.Count() > 1) Products.Remove(product);
    }
}
